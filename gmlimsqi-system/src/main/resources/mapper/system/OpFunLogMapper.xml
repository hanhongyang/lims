<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gmlimsqi.system.mapper.OpFunLogMapper">
    <resultMap type="com.gmlimsqi.system.domain.OpFunLog" id="OpFunLogResult">
        <result property="funId" column="fun_id"/>
        <result property="title" column="title"/>
        <result property="businessType" column="business_type"/>
        <result property="method" column="method"/>
        <result property="requestMethod" column="request_method"/>
        <result property="operName" column="oper_name"/>
        <result property="deptName" column="dept_name"/>
        <result property="operUrl" column="oper_url"/>
        <result property="operIp" column="oper_ip"/>
        <result property="operLocation" column="oper_location"/>
        <result property="status" column="status"/>
        <result property="errorMsg" column="error_msg"/>
        <result property="operTime" column="oper_time"/>
        <result property="operParam" column="oper_param"/>
        <result property="jsonResult" column="json_result"/>
        <result property="description" column="description"/>
        <result property="systemName" column="system_name"/>
        <result property="deptId" column="dept_id"/>
        <result property="companyId" column="company_id"/>
        <result property="companyName" column="company_name"/>
        <result property="operId" column="oper_id"/>
    </resultMap>

    <sql id="selectOpFunLogVo">
        select fun_id,
               title,
               business_type,
               method,
               request_method,
               oper_name,
               dept_name,
               oper_url,
               oper_ip,
               oper_location,
               status,
               error_msg,
               oper_time,
               oper_param,
               json_result,
               description,
               system_name,
               dept_id,
               company_id,
               company_name,
               oper_id
        from op_fun_log
    </sql>

    <select id="selectOpFunLogList" parameterType="OpFunLog" resultMap="OpFunLogResult">
        <include refid="selectOpFunLogVo"/>
        <where>
            <if test="title != null  and title != ''">
                and title = #{title}
            </if>
            <if test="businessType != null">
                and business_type = #{businessType}
            </if>
            <if test="method != null  and method != ''">
                and method = #{method}
            </if>
            <if test="requestMethod != null  and requestMethod != ''">
                and request_method = #{requestMethod}
            </if>
            <if test="operName != null  and operName != ''">
                and oper_name like concat('%', #{operName}, '%')
            </if>
            <if test="deptName != null  and deptName != ''">
                and dept_name like concat('%', #{deptName}, '%')
            </if>
            <if test="operUrl != null  and operUrl != ''">
                and oper_url = #{operUrl}
            </if>
            <if test="operIp != null  and operIp != ''">
                and oper_ip = #{operIp}
            </if>
            <if test="operLocation != null  and operLocation != ''">
                and oper_location = #{operLocation}
            </if>
            <if test="status != null">
                and status = #{status}
            </if>
            <if test="errorMsg != null  and errorMsg != ''">
                and error_msg = #{errorMsg}
            </if>
            <if test="operTime != null">
                and oper_time = #{operTime}
            </if>
            <if test="operParam != null  and operParam != ''">
                and oper_param = #{operParam}
            </if>
            <if test="jsonResult != null  and jsonResult != ''">
                and json_result = #{jsonResult}
            </if>
            <if test="description != null  and description != ''">
                and description = #{description}
            </if>
            <if test="systemName != null  and systemName != ''">
                and system_name like concat('%', #{systemName}, '%')
            </if>
            <if test="deptId != null  and deptId != ''">
                and dept_id = #{deptId}
            </if>
            <if test="companyId != null  and companyId != ''">
                and company_id = #{companyId}
            </if>
            <if test="companyName != null  and companyName != ''">
                and company_name like concat('%', #{companyName}, '%')
            </if>
            <if test="operId != null  and operId != ''">
                and oper_id = #{operId}
            </if>
        </where>
    </select>

    <select id="selectOpFunLogByFunId" parameterType="Long" resultMap="OpFunLogResult">
        <include refid="selectOpFunLogVo"/>
        where fun_id = #{funId}
    </select>

    <insert id="insertOpFunLog" parameterType="OpFunLog">
        insert into op_fun_log
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="funId != null">
                fun_id,
            </if>
            <if test="title != null">
                title,
            </if>
            <if test="businessType != null">
                business_type,
            </if>
            <if test="method != null">
                method,
            </if>
            <if test="requestMethod != null">
                request_method,
            </if>
            <if test="operName != null">
                oper_name,
            </if>
            <if test="deptName != null">
                dept_name,
            </if>
            <if test="operUrl != null">
                oper_url,
            </if>
            <if test="operIp != null">
                oper_ip,
            </if>
            <if test="operLocation != null">
                oper_location,
            </if>
            <if test="status != null">
                status,
            </if>
            <if test="errorMsg != null">
                error_msg,
            </if>
            <if test="operTime != null">
                oper_time,
            </if>
            <if test="operParam != null">
                oper_param,
            </if>
            <if test="jsonResult != null">
                json_result,
            </if>
            <if test="description != null">
                description,
            </if>
            <if test="systemName != null">
                system_name,
            </if>
            <if test="deptId != null">
                dept_id,
            </if>
            <if test="companyId != null">
                company_id,
            </if>
            <if test="companyName != null">
                company_name,
            </if>
            <if test="operId != null">
                oper_id,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="funId != null">
                #{funId},
            </if>
            <if test="title != null">
                #{title},
            </if>
            <if test="businessType != null">
                #{businessType},
            </if>
            <if test="method != null">
                #{method},
            </if>
            <if test="requestMethod != null">
                #{requestMethod},
            </if>
            <if test="operName != null">
                #{operName},
            </if>
            <if test="deptName != null">
                #{deptName},
            </if>
            <if test="operUrl != null">
                #{operUrl},
            </if>
            <if test="operIp != null">
                #{operIp},
            </if>
            <if test="operLocation != null">
                #{operLocation},
            </if>
            <if test="status != null">
                #{status},
            </if>
            <if test="errorMsg != null">
                #{errorMsg},
            </if>
            <if test="operTime != null">
                #{operTime},
            </if>
            <if test="operParam != null">
                #{operParam},
            </if>
            <if test="jsonResult != null">
                #{jsonResult},
            </if>
            <if test="description != null">
                #{description},
            </if>
            <if test="systemName != null">
                #{systemName},
            </if>
            <if test="deptId != null">
                #{deptId},
            </if>
            <if test="companyId != null">
                #{companyId},
            </if>
            <if test="companyName != null">
                #{companyName},
            </if>
            <if test="operId != null">
                #{operId},
            </if>
        </trim>
    </insert>

</mapper>